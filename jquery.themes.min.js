/* http://keith-wood.name/themes.html
   Applying CSS themes for jQuery v1.2.0.
   Written by Keith Wood (kbwood{at}iinet.com.au) September 2008.
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the author if you use it. */
(function($){var m='themeID';function Themes(){this.currentTheme='';this._uuid=new Date().getTime();this._linkID='th'+this._uuid;this._defaults={themeBase:'',defaultTheme:'',cookieExpiry:0,cookiePath:'/',cookieDomain:'',onSelect:null};this._settings={themes:[],icons:'img/themes.gif',iconSize:[23,20],previews:'img/themes-preview.gif',previewSize:[90,80],showPreview:true,compact:true};this._themes={'blacktie':{display:'Black Tie',icon:0,preview:0,url:'black-tie/ui.all.css'},'blitzer':{display:'Blitzer',icon:1,preview:1,url:'blitzer/ui.all.css'},'cupertino':{display:'Cupertino',icon:2,preview:2,url:'cupertino/ui.all.css'},'darkhive':{display:'Dark Hive',icon:17,preview:17,url:'dark-hive/ui.all.css'},'dotluv':{display:'Dot Luv',icon:3,preview:3,url:'dot-luv/ui.all.css'},'eggplant':{display:'Eggplant',icon:18,preview:18,url:'eggplant/ui.all.css'},'excitebike':{display:'Excite Bike',icon:4,preview:4,url:'excite-bike/ui.all.css'},'flick':{display:'Flick',icon:19,preview:19,url:'flick/ui.all.css'},'hotsneaks':{display:'Hot Sneaks',icon:5,preview:5,url:'hot-sneaks/ui.all.css'},'humanity':{display:'Humanity',icon:6,preview:6,url:'humanity/ui.all.css'},'lefrog':{display:'Le Frog',icon:20,preview:20,url:'le-frog/ui.all.css'},'mintchoc':{display:'Mint Choc',icon:7,preview:7,url:'mint-choc/ui.all.css'},'overcast':{display:'Overcast',icon:21,preview:21,url:'overcast/ui.all.css'},'peppergrinder':{display:'Pepper Grinder',icon:22,preview:22,url:'pepper-grinder/ui.all.css'},'redmond':{display:'Redmond',icon:8,preview:8,url:'redmond/ui.all.css'},'smoothness':{display:'Smoothness',icon:9,preview:9,url:'smoothness/ui.all.css'},'southstreet':{display:'South Street',icon:10,preview:10,url:'south-street/ui.all.css'},'start':{display:'Start',icon:11,preview:11,url:'start/ui.all.css'},'sunny':{display:'Sunny',icon:23,preview:23,url:'sunny/ui.all.css'},'swankypurse':{display:'Swanky Purse',icon:12,preview:12,url:'swanky-purse/ui.all.css'},'trontastic':{display:'Trontastic',icon:13,preview:13,url:'trontastic/ui.all.css'},'uidarkness':{display:'UI Darkess',icon:14,preview:14,url:'ui-darkness/ui.all.css'},'uilightness':{display:'UI Lightness',icon:15,preview:15,url:'ui-lightness/ui.all.css'},'vader':{display:'Vader',icon:16,preview:16,url:'vader/ui.all.css'}}}$.extend(Themes.prototype,{markerClassName:'hasThemes',setDefaults:function(a){extendRemove(this._defaults,a||{});return this},init:function(a){if(a){this.setDefaults(a)}var b=new RegExp(m+'=([^;]*)');var c=b.exec(document.cookie);var d=(c?c[1]:'')||this._defaults.defaultTheme;var e='';var f=false;for(var g in this._themes){e=e||g;f=(d==g);if(f){break}}d=(f?d:e);this._setTheme(d,this._themes[d].display,this._defaults.themeBase+this._themes[d].url,true);return this},addTheme:function(a,b,c,d,e){this._themes[a]={display:b,icon:c,preview:d,url:e};return this},getThemes:function(){return this._themes},_attachThemes:function(a,b){a=$(a);if(a.hasClass(this.markerClassName)){return}a.addClass(this.markerClassName);this._updateTheme(a,b)},_changeThemes:function(a,b){a=$(a);if(!a.hasClass(this.markerClassName)){return}this._updateTheme(a,b)},_updateTheme:function(d,e){e=extendRemove($.extend({},this._settings,this._defaults),e);var f=e.themes;if(f.length==0){$.each(this._themes,function(a){f[f.length]=a})}var g=function(a){return a.replace(/'/,'\\\'')};var h='th'+ ++this._uuid;var i='<ul class="themes_list'+(e.compact?' themes_compact':'')+'">';var j=this._themes;$.each(f,function(a,b){var c=j[b];if(!c){return}i+='<li class="themes__'+b+($.themes.currentTheme==b?' themes_current':'')+'"><a onclick="$.themes._setTheme(\''+b+'\',\''+g(c.display)+'\',\''+g(e.themeBase+c.url)+'\')"'+(!e.showPreview?'':' onmouseover="$.themes._showPreview(this, \'#'+h+'\',\''+g(c.display)+'\','+(typeof c.preview=='number'?c.preview:'\''+c.preview+'\'')+','+e.previewSize[0]+')" '+'onmouseout="$.themes._hidePreview(\'#'+h+'\')"')+'>';if(c.icon!=null){i+='<span title="'+c.display+'"';if(typeof c.icon=='number'){i+=' style="background: transparent url('+e.icons+') no-repeat -'+(c.icon*e.iconSize[0])+'px 0px;'+($.browser.mozilla&&$.browser.version<'1.9'?' padding-left: '+e.iconSize[0]+'px;'+' padding-bottom: '+(e.iconSize[1]-16)+'px;':'')+'">'}else{i+='><img src="'+c.icon+'" alt="'+c.display+'"/>'}i+='</span>'+(e.compact?'':'&#xa0;')}i+=(e.compact?'':c.display)+'</a></li>'});i+='</ul><div id="'+h+'" class="themes_preview"><div '+'style="width: '+e.previewSize[0]+'px; height: '+e.previewSize[1]+'px; background: url('+e.previews+') no-repeat;"></div></div>';d.html(i)},_destroyThemes:function(a){a=$(a);if(!a.hasClass(this.markerClassName)){return}a.removeClass(this.markerClassName).empty()},_setTheme:function(c,d,e,f){if($('#'+$.themes._linkID).length==0){$('head').append('<link rel="stylesheet" type="text/css" id="'+$.themes._linkID+'"/>')}$('#'+$.themes._linkID).attr('href',e);$.themes.currentTheme=c;$('.'+$.themes.markerClassName+' li').removeClass('themes_current');$('.themes__'+c).addClass('themes_current');var g=$.themes._defaults.onSelect;if(g){g.apply(window,[c,d,e])}if(!f){var h=function(a){var b=new Date();b.setDate(b.getDate()+a);return b};var i=($.themes._defaults.cookieExpiry?(typeof $.themes._defaults.cookieExpiry=='number'?h($.themes._defaults.cookieExpiry):$.themes._defaults.cookieExpiry):null);document.cookie=m+'='+c+(i?'; expires='+i.toUTCString():'')+($.themes._defaults.cookiePath?'; path='+$.themes._defaults.cookiePath:'')+($.themes._defaults.cookieDomain?'; domain='+$.themes._defaults.cookieDomain:'')}return false},_showPreview:function(a,b,c,d,e){if(d==null){return}var f='';if(typeof d=='number'){$(b+' div').show().css('background-position','-'+(d*e)+'px 0px')}else{$(b+' div').hide();f+='<img src="'+d+'" alt="'+c+'"/><br/>'}f+='<span>'+c+'</span>';var g=$(a).parent();var h=null;$(a).parents().each(function(){if($(this).css('position')=='absolute'){h=$(this)}return!h});var i=g.offset();var j=(h?h.offset():{left:0,top:0});var k=i.left-j.left+parseInt(g.css('padding-left'),10);var l=i.top-j.top+g.height()+parseInt(g.css('padding-top'),10)+1;$(b).children(':not(:first)').remove().end().append(f).css({left:k,top:l}).show()},_hidePreview:function(a){$(a).hide()}});function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null){a[c]=null}}return a}$.fn.themes=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){if(typeof a=='string'){$.themes['_'+a+'Themes'].apply($.themes,[this].concat(b))}else{$.themes._attachThemes(this,a||{})}})};$.themes=new Themes()})(jQuery);